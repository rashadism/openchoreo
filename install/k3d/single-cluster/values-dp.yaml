# Helm values for OpenChoreo Data Plane in k3d single-cluster setup
# This file contains overrides specific to running the data plane in a k3d environment

# Disable cert-manager since it's already installed by Control Plane
cert-manager:
  enabled: false

# Gateway configuration for single-cluster setup
# The gateway will be accessible on port 9080 (HTTP) and 9443 (HTTPS)
gateway:
  # Enable gateway
  enabled: true

  # Use custom ports for single-cluster setup
  httpPort: 9080
  httpsPort: 9443

  # Envoy - enabled by default for traffic routing
  envoy:
    enabled: true
    # Mount /tmp as emptyDir volume to fix Envoy temporary file creation issues
    # Enable this if gateway pods crash with "Failed to create temporary file" errors
    # Common on: macOS with Docker Desktop/Colima with Rosetta enabled.
    # Ref: https://github.com/kgateway-dev/kgateway/issues/9800
    mountTmpVolume: true

# Cluster Agent configuration for single-cluster setup
clusterAgent:
  enabled: true
  serverUrl: wss://cluster-gateway.openchoreo-control-plane.svc.cluster.local:8443/ws
  planeName: default
  planeType: dataplane
