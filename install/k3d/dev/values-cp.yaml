# Control Plane values for k3d dev environment
# Uses locally-built images with pullPolicy: Never

global:
  baseDomain: openchoreo.localhost
  # Port suffix for URLs (k3d maps host:8080 -> container:80)
  port: ":8080"

security:
  enabled: false

controllerManager:
  image:
    repository: ghcr.io/openchoreo/controller
    tag: latest-dev
    pullPolicy: Never
  containerSecurityContext:
    appArmorProfile:
      type: Unconfined

openchoreoApi:
  enabled: true
  image:
    repository: ghcr.io/openchoreo/openchoreo-api
    tag: latest-dev
    pullPolicy: Never
  containerSecurityContext:
    appArmorProfile:
      type: Unconfined

# Disable UI and auth for dev
backstage:
  enabled: false

thunder:
  enabled: false

gateway:
  # Enable gateway
  enabled: true

  # Envoy - enabled by default for traffic routing
  envoy:
    enabled: true
    # Mount /tmp as emptyDir volume to fix Envoy temporary file creation issues
    # Enable this if gateway pods crash with "Failed to create temporary file" errors
    # Common on: macOS with Docker Desktop/Colima with Rosetta enabled.
    # Ref: https://github.com/kgateway-dev/kgateway/issues/9800
    mountTmpVolume: true
