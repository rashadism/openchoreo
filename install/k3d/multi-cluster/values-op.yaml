# Helm values for OpenChoreo Observability Plane in k3d multi-cluster setup

openSearch:
  enabled: false

openSearchCluster:
  enabled: false
  credentialsSecretName: observer-opensearch-credentials
  adminPassword: "ThisIsTheOpenSearchPassword1"

observer:
  openSearchSecretName: observer-opensearch-credentials
  extraEnvs:
  - name: OBSERVER_BASE_URL
    value: "http://observer.openchoreo.localhost:11080"
  - name: AUTH_SERVER_BASE_URL
    value: "http://thunder.openchoreo.localhost:8080"
  - name: OPENSEARCH_ADDRESS
    value: "https://opensearch:9200"
  - name: PROMETHEUS_ADDRESS
    value: "http://openchoreo-observability-prometheus:9091"
  - name: PROMETHEUS_TIMEOUT
    value: "30s"
  - name: AUTHZ_TIMEOUT
    value: "30s"
  http:
    hostnames:
    - host.k3d.internal
    - observer.openchoreo.localhost

openSearchDashboards:
  service:
    type: LoadBalancer

security:
  oidc:
    jwksUrl: "http://thunder.openchoreo.localhost:8080/oauth2/jwks"
    tokenUrl: "http://thunder.openchoreo.localhost:8080/oauth2/token"
    jwksUrlTlsInsecureSkipVerify: "true"

gateway:
  httpPort: 11080
  httpsPort: 11085
  tls:
    enabled: false
  tlsPassthrough:
    enabled: true
    hostname: "opensearch.observability.openchoreo.localhost"
    port: 11085

clusterAgent:
  serverUrl: "wss://cluster-gateway.openchoreo.localhost:8443/ws"
  tls:
    generateCerts: true

tls:
  enabled: true
  dnsNames:
    - "observability.openchoreo.localhost"
    - "*.observability.openchoreo.localhost"

fluent-bit:
  enabled: false

opentelemetry-collector:
  service:
    type: LoadBalancer

prometheus:
  prometheus:
    prometheusSpec:
      enableRemoteWriteReceiver: true
    service:
      type: LoadBalancer

rca:
  http:
    hostnames:
    - host.k3d.internal
    - rca-agent.observability.openchoreo.localhost
