# Helm values for OpenChoreo Data Plane in quick-start container
# This file contains overrides for running the data plane in the quick-start k3d environment
# Port mapping: k3d maps host ports 9080:9080 (HTTP) and 9443:9443 (HTTPS) for KGateway

# Disable cert-manager since it's already installed by Control Plane
cert-manager:
  enabled: false
  crds:
    enabled: false

# Gateway configuration for quick-start setup
# The gateway will be accessible on port 9080 (HTTP) and 9443 (HTTPS)
gateway:
  enabled: true
  httpPort: 9080
  httpsPort: 9443
  # Envoy - enabled by default for traffic routing
  envoy:
    enabled: true
    # Mount /tmp as emptyDir volume to fix Envoy temporary file creation issues
    # Enable this if gateway pods crash with "Failed to create temporary file" errors
    # Common on: macOS with Docker Desktop/Colima with Rosetta enabled.
    # Ref: https://github.com/kgateway-dev/kgateway/issues/9800
    mountTmpVolume: true

# Enable cluster agent for secure communication with control plane
clusterAgent:
  enabled: true
  serverUrl: wss://cluster-gateway.openchoreo-control-plane.svc.cluster.local:8443/ws
  planeName: default
  planeType: dataplane

networking:
  enabled: false

security:
  enabled: false

observability:
  enabled: false
