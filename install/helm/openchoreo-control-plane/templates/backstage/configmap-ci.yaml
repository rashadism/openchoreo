{{- if .Values.backstage.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "openchoreo-control-plane.fullname" . }}-backstage-ci-config
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "openchoreo-control-plane.labels" . | nindent 4 }}
    app.kubernetes.io/component: backstage
data:
  app-config.ci.yaml: |
    # External CI Platform Configuration
    # This file is auto-generated by Helm when Jenkins integration is enabled
    jenkins:
      baseUrl: ${JENKINS_BASE_URL}
      username: ${JENKINS_USERNAME}
      apiKey: ${JENKINS_API_KEY}
{{- end }}
