{{- /* vim: set filetype=mustache: */ -}}
{{- /* 
OpenChoreo Post-Installation Notes
This template provides helpful information after installing OpenChoreo
*/ -}}
OpenChoreo has been successfully installed! üéâ

Your OpenChoreo control plane is now running in namespace "{{ .Release.Namespace }}".

üìã NEXT STEPS:

1. VERIFY INSTALLATION:
   kubectl get pods -n {{ .Release.Namespace }}
   kubectl get crd | grep openchoreo.dev

2. CHECK COMPONENT STATUS:
   kubectl get organizations -n {{ .Release.Namespace }}
   kubectl get projects -n {{ .Release.Namespace }}

3. SET UP DATA PLANES:
   # Add a data plane cluster
   choreoctl dataplane create <name> --kubeconfig <path-to-kubeconfig>

4. CREATE YOUR FIRST ORGANIZATION:
   apiVersion: openchoreo.dev/v1alpha1
   kind: Organization
   metadata:
     name: my-org
     namespace: {{ .Release.Namespace }}

üîó USEFUL URLS:
{{- if .Values.openchoreoApi.ingress.enabled }}
{{- range .Values.openchoreoApi.ingress.hosts }}
OpenChoreo API: http{{ if $.Values.openchoreoApi.ingress.tls }}s{{ end }}://{{ .host }}{{ (index .paths 0).path }}
{{- end }}
{{- end }}
{{- if .Values.backstage.ingress.enabled }}
{{- range .Values.backstage.ingress.hosts }}
Backstage UI: http{{ if $.Values.backstage.ingress.tls }}s{{ end }}://{{ .host }}{{ (index .paths 0).path }}
{{- end }}
{{- end }}
{{- if .Values.asgardeoThunder.enabled }}
{{- if .Values.asgardeoThunder.ingress.enabled }}
{{- with index .Values.asgardeoThunder.ingress.hosts 0 }}
Choreo STS URL: http{{ if $.Values.asgardeoThunder.ingress.tls }}s{{ end }}://{{ .host }}{{ (index .paths 0).path }}
{{- end }}
{{- end }}
{{- end }}

üìä MONITORING:
{{- if .Values.controllerManager.metrics.serviceMonitor.enabled }}
Prometheus metrics are available at:
  /metrics endpoint on controller-manager service
ServiceMonitor has been created for Prometheus integration.
{{- end }}

üîß CONFIGURATION:
- Controller Manager replicas: {{ .Values.controllerManager.replicas }}
- API Server replicas: {{ .Values.openchoreoApi.replicas }}
- Backstage replicas: {{ .Values.backstage.replicas }}

üìö DOCUMENTATION:
- Getting Started: https://docs.openchoreo.dev
- CLI Reference: choreoctl --help
- API Documentation: Available via OpenChoreo API endpoint

‚ö†Ô∏è  IMPORTANT NOTES:
- Ensure your data plane clusters have network connectivity to the control plane
- Configure appropriate RBAC permissions for your users
- Set up monitoring and alerting for production deployments
- Regular backups of etcd are recommended for persistence

üêõ TROUBLESHOOTING:
- Check pod logs: kubectl logs -n {{ .Release.Namespace }} deployment/controller-manager
- Verify CRDs: kubectl get crd | grep openchoreo.dev
- Check events: kubectl get events -n {{ .Release.Namespace }} --sort-by=.metadata.creationTimestamp

For support, please visit: https://github.com/openchoreo/openchoreo/issues
