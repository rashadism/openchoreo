# yaml-language-server: $schema=values.schema.json

# @schema.root
# title: OpenChoreo Data Plane
# description: Helm values for the OpenChoreo data plane chart. Deploys runtime infrastructure including API gateway, observability, and control plane connectivity.
# @schema.root

# @schema
# type: object
# description: Global values shared across all components in the data plane
# additionalProperties: false
# @schema
global:
  # @schema
  # type: object
  # description: Common labels applied to all resources deployed by this chart
  # additionalProperties:
  #   type: string
  # default: {}
  # @schema
  commonLabels: {}

# @schema
# type: string
# description: Kubernetes cluster DNS domain used for service discovery and certificate generation
# default: cluster.local
# @schema
kubernetesClusterDomain: cluster.local

# @schema
# type: object
# additionalProperties: true
# description: Prometheus stack configuration (kube-prometheus-stack sub-chart). Provides metrics collection for workload observability.
# @schema
kube-prometheus-stack:
  # @schema
  # type: boolean
  # description: Enable the Prometheus monitoring stack for metrics collection
  # default: false
  # @schema
  enabled: false

  # @schema
  # type: string
  # description: Override the full name of Prometheus stack resources
  # default: openchoreo-observability
  # @schema
  fullnameOverride: openchoreo-observability

  # @schema
  # type: object
  # additionalProperties: true
  # description: Prometheus Operator manages Prometheus and Alertmanager components
  # @schema
  prometheusOperator:
    # @schema
    # type: boolean
    # description: Enable Prometheus Operator for managing Prometheus instances
    # default: true
    # @schema
    enabled: true

    # @schema
    # type: string
    # description: Override the full name of Prometheus Operator resources
    # default: prometheus-operator
    # @schema
    fullnameOverride: prometheus-operator

    # @schema
    # type: object
    # additionalProperties: true
    # description: Resource limits and requests for Prometheus Operator
    # @schema
    resources:
      # @schema
      # type: object
      # additionalProperties: true
      # description: Maximum resources the Prometheus Operator can consume
      # @schema
      limits:
        # @schema
        # type: string
        # description: CPU limit for Prometheus Operator
        # default: 40m
        # @schema
        cpu: 40m
        # @schema
        # type: string
        # description: Memory limit for Prometheus Operator
        # default: 50Mi
        # @schema
        memory: 50Mi
      # @schema
      # type: object
      # additionalProperties: true
      # description: Minimum resources guaranteed for Prometheus Operator
      # @schema
      requests:
        # @schema
        # type: string
        # description: CPU request for Prometheus Operator
        # default: 20m
        # @schema
        cpu: 20m
        # @schema
        # type: string
        # description: Memory request for Prometheus Operator
        # default: 30Mi
        # @schema
        memory: 30Mi

  # @schema
  # type: object
  # additionalProperties: true
  # description: Prometheus Operator CRD installation configuration
  # @schema
  crds:
    # @schema
    # type: boolean
    # description: Install Prometheus Operator CRDs (ServiceMonitor, PodMonitor, etc.)
    # default: true
    # @schema
    enabled: true

  # @schema
  # type: boolean
  # description: Produce cleaner resource names without redundant prefixes
  # default: true
  # @schema
  cleanPrometheusOperatorObjectNames: true

  # @schema
  # type: object
  # additionalProperties: true
  # description: Prometheus instance configuration for metrics scraping
  # @schema
  prometheus:
    # @schema
    # type: boolean
    # description: Deploy a Prometheus instance (requires Prometheus Operator)
    # default: true
    # @schema
    enabled: true

    # @schema
    # type: boolean
    # description: Run Prometheus in agent mode for lightweight remote-write only operation
    # default: true
    # @schema
    agentMode: true

    # @schema
    # type: object
    # additionalProperties: true
    # description: Prometheus instance specification
    # @schema
    prometheusSpec:
      # @schema
      # type: array
      # description: Remote write endpoints for forwarding metrics to external storage
      # items:
      #   type: object
      #   properties:
      #     url:
      #       type: string
      #       description: Remote write endpoint URL
      # @schema
      remoteWrite:
      - url: ""

  # @schema
  # type: object
  # additionalProperties: true
  # description: Alertmanager configuration for alert routing and notifications
  # @schema
  alertmanager:
    # @schema
    # type: boolean
    # description: Enable Alertmanager for alert management (not used by OpenChoreo)
    # default: false
    # @schema
    enabled: false

  # @schema
  # type: object
  # additionalProperties: true
  # description: Grafana configuration for metrics visualization
  # @schema
  grafana:
    # @schema
    # type: boolean
    # description: Enable Grafana dashboards (not used by OpenChoreo - use observability plane instead)
    # default: false
    # @schema
    enabled: false

  # @schema
  # type: object
  # additionalProperties: true
  # description: Kube-state-metrics configuration for Kubernetes object metrics
  # @schema
  kube-state-metrics:
    # @schema
    # type: string
    # description: Override the full name of kube-state-metrics resources
    # default: kube-state-metrics
    # @schema
    fullnameOverride: kube-state-metrics

    # @schema
    # type: array
    # description: Kubernetes resource types to collect metrics from
    # items:
    #   type: string
    # default: [pods]
    # @schema
    collectors:
      - pods

    # @schema
    # type: array
    # description: Specific metrics to collect (allowlist filter)
    # items:
    #   type: string
    # @schema
    metricAllowlist:
      - kube_pod_completion_time
      - kube_pod_container_resource_limits
      - kube_pod_container_resource_requests
      - kube_pod_info
      - kube_pod_init_container_resource_limits
      - kube_pod_init_container_resource_requests
      - kube_pod_labels
      - kube_pod_start_time
      - kube_pod_status_phase

    # @schema
    # type: array
    # description: Pod labels to include in metrics for filtering by OpenChoreo resources
    # items:
    #   type: string
    # @schema
    metricLabelsAllowlist:
      - pods=[openchoreo.dev/component-uid,openchoreo.dev/project-uid,openchoreo.dev/environment-uid]

  # @schema
  # type: object
  # additionalProperties: true
  # description: Default Prometheus alerting rules configuration
  # @schema
  defaultRules:
    # @schema
    # type: boolean
    # description: Create default alerting rules (disabled - OpenChoreo uses custom rules)
    # default: false
    # @schema
    create: false

  # OpenChoreo Observability is not meant for monitoring the kubernetes cluster
  # Hence, following kube components are disabled

  # @schema
  # type: object
  # additionalProperties: true
  # description: Kubernetes API server monitoring (disabled for OpenChoreo)
  # @schema
  kubeApiServer:
    # @schema
    # type: boolean
    # description: Enable API server metrics collection
    # default: false
    # @schema
    enabled: false

  # @schema
  # type: object
  # additionalProperties: true
  # description: Kubernetes controller manager monitoring (disabled for OpenChoreo)
  # @schema
  kubeControllerManager:
    # @schema
    # type: boolean
    # description: Enable controller manager metrics collection
    # default: false
    # @schema
    enabled: false

  # @schema
  # type: object
  # additionalProperties: true
  # description: CoreDNS monitoring (disabled for OpenChoreo)
  # @schema
  coreDns:
    # @schema
    # type: boolean
    # description: Enable CoreDNS metrics collection
    # default: false
    # @schema
    enabled: false

  # @schema
  # type: object
  # additionalProperties: true
  # description: etcd monitoring (disabled for OpenChoreo)
  # @schema
  kubeEtcd:
    # @schema
    # type: boolean
    # description: Enable etcd metrics collection
    # default: false
    # @schema
    enabled: false

  # @schema
  # type: object
  # additionalProperties: true
  # description: Kubernetes scheduler monitoring (disabled for OpenChoreo)
  # @schema
  kubeScheduler:
    # @schema
    # type: boolean
    # description: Enable scheduler metrics collection
    # default: false
    # @schema
    enabled: false

  # @schema
  # type: object
  # additionalProperties: true
  # description: Kube-proxy monitoring (disabled for OpenChoreo)
  # @schema
  kubeProxy:
    # @schema
    # type: boolean
    # description: Enable kube-proxy metrics collection
    # default: false
    # @schema
    enabled: false

  # @schema
  # type: object
  # additionalProperties: true
  # description: Node exporter monitoring (disabled for OpenChoreo)
  # @schema
  nodeExporter:
    # @schema
    # type: boolean
    # description: Enable node-level metrics collection
    # default: false
    # @schema
    enabled: false

# @schema
# type: object
# description: "[DEPRECATED] Container registry configuration. Registry has been moved to Build Plane."
# @schema
registry:
  # @schema
  # type: boolean
  # description: "[DEPRECATED] Enable the container registry. Use Build Plane registry instead."
  # default: false
  # @schema
  enabled: false

  # @schema
  # type: object
  # description: Resource limits and requests for the registry container
  # @schema
  resources:
    # @schema
    # type: object
    # description: Maximum resources the registry can consume
    # @schema
    limits:
      # @schema
      # type: string
      # description: Memory limit for the registry
      # default: 256Mi
      # @schema
      memory: 256Mi
      # @schema
      # type: string
      # description: CPU limit for the registry
      # default: 100m
      # @schema
      cpu: 100m
    # @schema
    # type: object
    # description: Minimum resources guaranteed for the registry
    # @schema
    requests:
      # @schema
      # type: string
      # description: Memory request for the registry
      # default: 128Mi
      # @schema
      memory: 128Mi
      # @schema
      # type: string
      # description: CPU request for the registry
      # default: 50m
      # @schema
      cpu: 50m

  # @schema
  # type: object
  # description: Kubernetes service configuration for the registry
  # @schema
  service:
    # @schema
    # type: integer
    # description: NodePort for external access to the registry
    # default: 30003
    # minimum: 30000
    # maximum: 32767
    # @schema
    nodePort: 30003

  # @schema
  # type: object
  # description: Persistent volume storage configuration for registry data
  # @schema
  storage:
    # @schema
    # type: string
    # description: Size of the persistent volume for storing container images
    # default: 2Gi
    # @schema
    size: 2Gi

# @schema
# type: object
# additionalProperties: true
# description: KGateway API gateway configuration. Provides HTTP/HTTPS traffic routing using Kubernetes Gateway API and Envoy proxy.
# @schema
gateway:
  # @schema
  # type: boolean
  # description: Enable Gateway CR creation
  # default: true
  # @schema
  enabled: true

  # @schema
  # type: string
  # description: GatewayClass name to reference in the Gateway CR
  # default: "kgateway"
  # @schema
  gatewayClassName: "kgateway"

  # @schema
  # type: object
  # additionalProperties: true
  # description: |
  #   Gateway infrastructure configuration passed to the generated Service.
  #   Used to configure cloud provider load balancer settings via annotations.
  #   Example for AWS with Elastic IP:
  #     infrastructure:
  #       annotations:
  #         service.beta.kubernetes.io/aws-load-balancer-type: "external"
  #         service.beta.kubernetes.io/aws-load-balancer-nlb-target-type: "ip"
  #         service.beta.kubernetes.io/aws-load-balancer-scheme: "internet-facing"
  #         service.beta.kubernetes.io/aws-load-balancer-eip-allocations: "eipalloc-xxx"
  # @schema
  infrastructure: {}

  # @schema
  # type: object
  # description: Self-signed ClusterIssuer configuration
  # @schema
  selfSignedIssuer:
    # @schema
    # type: boolean
    # description: Create self-signed ClusterIssuer (set to false in single cluster mode)
    # default: true
    # @schema
    enabled: true

  # @schema
  # type: integer
  # description: Port for the HTTP listener on the gateway
  # default: 9080
  # minimum: 1
  # maximum: 65535
  # @schema
  httpPort: 9080

  # @schema
  # type: integer
  # description: Port for the HTTPS listener on the gateway
  # default: 9443
  # minimum: 1
  # maximum: 65535
  # @schema
  httpsPort: 9443

  # @schema
  # type: object
  # additionalProperties: true
  # description: TLS configuration for HTTPS listeners. Requires cert-manager for automatic certificate generation.
  # @schema
  tls:
    # @schema
    # type: string
    # description: Cert-manager ClusterIssuer name for certificate generation. Defaults to openchoreo-selfsigned-issuer if empty.
    # default: ""
    # @schema
    clusterIssuer: ""

    # @schema
    # type: string
    # description: Hostname pattern for the HTTPS listener certificate
    # default: "*.openchoreoapis.localhost"
    # @schema
    hostname: "*.openchoreoapis.localhost"

    # @schema
    # type: string
    # description: Kubernetes Secret name for storing the TLS certificate
    # default: openchoreo-gateway-tls
    # @schema
    certName: "openchoreo-gateway-tls"

  # @schema
  # type: object
  # additionalProperties: true
  # description: KGateway controller configuration for managing Gateway API resources
  # @schema
  controller:
    # @schema
    # type: integer
    # description: Number of gateway controller replicas
    # default: 1
    # minimum: 1
    # @schema
    replicaCount: 1

    # @schema
    # description: Log level for the gateway controller
    # enum: [trace, debug, info, warn, error]
    # default: info
    # @schema
    logLevel: info

    # @schema
    # type: object
    # additionalProperties: true
    # description: Container image configuration for the gateway controller
    # @schema
    image:
      # @schema
      # type: string
      # description: Container registry for the controller image. Empty uses default registry.
      # default: ""
      # @schema
      registry: ""

      # @schema
      # type: string
      # description: Image repository name for the gateway controller
      # default: kgateway
      # @schema
      repository: kgateway

      # @schema
      # description: Image pull policy for the controller container
      # enum: [Always, IfNotPresent, Never]
      # default: IfNotPresent
      # @schema
      pullPolicy: IfNotPresent

      # @schema
      # type: string
      # description: Image tag. Empty uses Chart.AppVersion.
      # default: ""
      # @schema
      tag: ""

    # @schema
    # type: object
    # additionalProperties: true
    # description: Kubernetes service configuration for the gateway controller
    # @schema
    service:
      # @schema
      # description: Service type for the gateway controller
      # enum: [ClusterIP, NodePort, LoadBalancer]
      # default: ClusterIP
      # @schema
      type: ClusterIP

      # @schema
      # type: object
      # additionalProperties: true
      # description: Service port mappings for the gateway controller
      # @schema
      ports:
        # @schema
        # type: integer
        # description: gRPC port for xDS communication
        # default: 9977
        # @schema
        grpc: 9977

        # @schema
        # type: integer
        # description: Agent gateway gRPC port
        # default: 9978
        # @schema
        agwGrpc: 9978

        # @schema
        # type: integer
        # description: Health check endpoint port
        # default: 9093
        # @schema
        health: 9093

        # @schema
        # type: integer
        # description: Metrics endpoint port
        # default: 9092
        # @schema
        metrics: 9092

    # @schema
    # type: object
    # additionalProperties: true
    # description: Resource limits and requests for the gateway controller
    # @schema
    resources:
      # @schema
      # type: object
      # additionalProperties: true
      # description: Maximum resources the controller can consume
      # @schema
      limits:
        # @schema
        # type: string
        # description: CPU limit for the controller
        # default: 200m
        # @schema
        cpu: 200m
        # @schema
        # type: string
        # description: Memory limit for the controller
        # default: 256Mi
        # @schema
        memory: 256Mi
      # @schema
      # type: object
      # additionalProperties: true
      # description: Minimum resources guaranteed for the controller
      # @schema
      requests:
        # @schema
        # type: string
        # description: CPU request for the controller
        # default: 100m
        # @schema
        cpu: 100m
        # @schema
        # type: string
        # description: Memory request for the controller
        # default: 128Mi
        # @schema
        memory: 128Mi

  # @schema
  # type: object
  # additionalProperties: true
  # description: Agent Gateway configuration for MCP server and REST API connectivity
  # @schema
  agentgateway:
    # @schema
    # type: boolean
    # description: Enable Agent Gateway for AI agent connectivity
    # default: false
    # @schema
    enabled: false

# @schema
# type: object
# description: Network configuration for the data plane
# @schema
networking:
  # @schema
  # type: boolean
  # description: Enable networking features (network policies, service mesh integration)
  # default: true
  # @schema
  enabled: true

# @schema
# type: object
# description: Security configuration for the data plane
# @schema
security:
  # @schema
  # type: boolean
  # description: Enable security features (certificate issuers, TLS configuration)
  # default: true
  # @schema
  enabled: true

# @schema
# type: object
# description: Observability configuration controlling metrics, logging, and tracing collection
# @schema
observability:
  # @schema
  # type: boolean
  # description: Master switch for all observability features
  # default: true
  # @schema
  enabled: true

  # @schema
  # type: string
  # description: URL of the observability plane for sending telemetry data (OTLP endpoint)
  # default: ""
  # @schema
  observabilityPlaneUrl: ""

  # @schema
  # type: object
  # description: Metrics collection configuration (L7 visibility and ServiceMonitors)
  # @schema
  metrics:
    # @schema
    # type: boolean
    # description: Enable metrics collection. Set to true after observability plane is installed.
    # default: false
    # @schema
    enabled: false

  # @schema
  # type: object
  # description: Logging configuration for container log collection
  # @schema
  logging:
    # @schema
    # type: boolean
    # description: Enable log collection. Set to true after observability plane is installed.
    # default: false
    # @schema
    enabled: false

    # @schema
    # type: object
    # description: Log publisher configurations
    # @schema
    publishers:
      # @schema
      # type: object
      # description: Fluent Bit log publisher configuration
      # @schema
      fluentbit:
        # @schema
        # type: boolean
        # description: Enable Fluent Bit as the log publisher
        # default: true
        # @schema
        enabled: true

# @schema
# type: object
# additionalProperties: true
# description: Fluent Bit subchart configuration for log collection and forwarding to OpenSearch
# @schema
fluent-bit:
  # @schema
  # type: boolean
  # description: Enable Fluent Bit log collector deployment
  # default: false
  # @schema
  enabled: false

  # @schema
  # type: object
  # additionalProperties: true
  # description: Fluent Bit pipeline configuration (parsers, inputs, filters, outputs)
  # @schema
  config:
    # @schema
    # type: string
    # description: Custom parser definitions in Fluent Bit configuration format
    # @schema
    customParsers: |
      [PARSER]
          Name docker_no_time
          Format json
          Time_Keep Off
          Time_Key time
          Time_Format %Y-%m-%dT%H:%M:%S.%L

    # @schema
    # type: string
    # description: Input plugin configuration for log collection
    # @schema
    inputs: |
      [INPUT]
          Name tail
          Buffer_Chunk_Size 32KB
          Buffer_Max_Size 2MB
          DB /var/lib/fluent-bit/db/tail-container-logs.db
          Exclude_Path /var/log/containers/fluent-bit-*_openchoreo-data-plane_*.log
          Inotify_Watcher false
          Mem_Buf_Limit 256MB
          Path /var/log/containers/*.log
          multiline.parser docker, cri
          Read_from_Head On
          Refresh_Interval 5
          Skip_Long_Lines On
          Tag kube.*

    # @schema
    # type: string
    # description: Filter plugin configuration for log processing
    # @schema
    filters: |
      [FILTER]
          Name kubernetes
          Buffer_Size 32MB
          K8S-Logging.Parser On
          K8S-Logging.Exclude On
          Keep_Log On
          Match kube.*
          Merge_Log Off
          tls.verify Off
          Use_Kubelet true

    # @schema
    # type: string
    # description: Output plugin configuration for log forwarding to OpenSearch
    # @schema
    outputs: |
      [OUTPUT]
          Name opensearch
          Host opensearch
          Generate_ID On
          HTTP_Passwd ThisIsTheOpenSearchPassword1
          HTTP_User admin
          Logstash_Format On
          Logstash_DateFormat %Y-%m-%d
          Logstash_Prefix container-logs
          Match kube.*
          Port 9200
          Replace_Dots On
          Suppress_Type_Name On
          tls On
          tls.verify Off

  # @schema
  # description: DNS policy for Fluent Bit pods
  # enum: [ClusterFirst, ClusterFirstWithHostNet, Default, None]
  # default: ClusterFirstWithHostNet
  # @schema
  dnsPolicy: ClusterFirstWithHostNet

  # @schema
  # type: string
  # description: Override the full name of Fluent Bit resources
  # default: fluent-bit
  # @schema
  fullnameOverride: "fluent-bit"

  # @schema
  # type: boolean
  # description: Use host network for Fluent Bit pods (required for node log access)
  # default: true
  # @schema
  hostNetwork: true

  # @schema
  # type: array
  # description: Extra volume mounts for the Fluent Bit container
  # items:
  #   type: object
  # @schema
  extraVolumeMounts:
  - name: db
    mountPath: "/var/lib/fluent-bit/db"
    readOnly: false

  # @schema
  # type: array
  # description: Extra volumes for the Fluent Bit pod
  # items:
  #   type: object
  # @schema
  extraVolumes:
    - name: db
      hostPath:
        path: /var/lib/fluent-bit/db
        type: DirectoryOrCreate

  # @schema
  # type: integer
  # description: Port for Fluent Bit metrics endpoint
  # minimum: 1
  # maximum: 65535
  # default: 2021
  # @schema
  metricsPort: 2021

  # @schema
  # type: object
  # additionalProperties: true
  # description: RBAC configuration for Fluent Bit
  # @schema
  rbac:
    # @schema
    # type: boolean
    # description: Enable node-level access for reading container logs
    # default: true
    # @schema
    nodeAccess: true

  # @schema
  # type: object
  # additionalProperties: true
  # description: Resource requests and limits for Fluent Bit
  # @schema
  resources:
    # @schema
    # type: object
    # additionalProperties: true
    # description: Maximum resources the container can use
    # @schema
    limits:
      # @schema
      # type: string
      # description: CPU limit for Fluent Bit
      # default: 200m
      # @schema
      cpu: 200m
      # @schema
      # type: string
      # description: Memory limit for Fluent Bit
      # default: 256Mi
      # @schema
      memory: 256Mi
    # @schema
    # type: object
    # additionalProperties: true
    # description: Minimum resources guaranteed to the container
    # @schema
    requests:
      # @schema
      # type: string
      # description: CPU request for Fluent Bit
      # default: 100m
      # @schema
      cpu: 100m
      # @schema
      # type: string
      # description: Memory request for Fluent Bit
      # default: 128Mi
      # @schema
      memory: 128Mi

  # @schema
  # type: object
  # additionalProperties: true
  # description: Security context for the Fluent Bit container
  # @schema
  securityContext:
    # @schema
    # type: boolean
    # description: Prevent privilege escalation
    # default: false
    # @schema
    allowPrivilegeEscalation: false
    # @schema
    # type: object
    # additionalProperties: true
    # description: Linux capabilities configuration
    # @schema
    capabilities:
      # @schema
      # type: array
      # description: Capabilities to drop
      # items:
      #   type: string
      # @schema
      drop:
      - ALL
    # @schema
    # type: boolean
    # description: Mount root filesystem as read-only
    # default: true
    # @schema
    readOnlyRootFilesystem: true
    # @schema
    # type: boolean
    # description: Run container as non-root user
    # default: true
    # @schema
    runAsNonRoot: true
    # @schema
    # type: integer
    # description: User ID to run the container
    # minimum: 0
    # default: 10000
    # @schema
    runAsUser: 10000

  # @schema
  # type: object
  # additionalProperties: true
  # description: Service configuration for Fluent Bit
  # @schema
  service:
    # @schema
    # type: integer
    # description: Service port for Fluent Bit metrics
    # minimum: 1
    # maximum: 65535
    # default: 2021
    # @schema
    port: 2021

  # @schema
  # type: object
  # additionalProperties: true
  # description: Test framework configuration
  # @schema
  testFramework:
    # @schema
    # type: boolean
    # description: Enable Fluent Bit test framework
    # default: false
    # @schema
    enabled: false

  # @schema
  # type: array
  # description: Init containers for the Fluent Bit pod (used to set volume ownership)
  # items:
  #   type: object
  # @schema
  initContainers:
  - name: set-volume-ownership
    image: busybox
    command: ["sh", "-c", "chown -R 10000:10000 /var/lib/fluent-bit/db"]
    resources:
      limits:
        cpu: 15m
        memory: "32Mi"
      requests:
        cpu: 10m
        memory: "24Mi"
    securityContext:
      capabilities:
        drop:
        - ALL
      privileged: true
      readOnlyRootFilesystem: true
      runAsUser: 0
    volumeMounts:
    - name: db
      mountPath: /var/lib/fluent-bit/db

# @schema
# type: object
# additionalProperties: true
# description: OpenTelemetry Collector configuration for trace and metrics collection
# @schema
opentelemetry-collector:
  # @schema
  # type: boolean
  # description: Enable OpenTelemetry Collector deployment
  # default: false
  # @schema
  enabled: false

  # @schema
  # type: object
  # additionalProperties: true
  # description: ClusterRole configuration for accessing Kubernetes resources
  # @schema
  clusterRole:
    # @schema
    # type: boolean
    # description: Create ClusterRole for OpenTelemetry Collector
    # default: true
    # @schema
    create: true

    # @schema
    # type: array
    # description: RBAC rules for accessing Kubernetes API resources
    # items:
    #   type: object
    #   properties:
    #     apiGroups:
    #       type: array
    #       items:
    #         type: string
    #     resources:
    #       type: array
    #       items:
    #         type: string
    #     verbs:
    #       type: array
    #       items:
    #         type: string
    # @schema
    rules:
      - apiGroups: [""]
        resources: ["pods"]
        verbs: ["list", "watch"]
      - apiGroups: ["apps"]
        resources: ["replicasets"]
        verbs: ["list","watch"]

  # @schema
  # type: object
  # additionalProperties: true
  # description: ConfigMap configuration for collector pipeline
  # @schema
  configMap:
    # @schema
    # type: boolean
    # description: Create a new ConfigMap (false to use existing)
    # default: false
    # @schema
    create: false

    # @schema
    # type: string
    # description: Name of existing ConfigMap containing collector configuration
    # default: "opentelemetry-collector-config"
    # @schema
    existingName: "opentelemetry-collector-config"

  # @schema
  # type: string
  # description: Override the full name of OpenTelemetry Collector resources
  # default: "opentelemetry-collector"
  # @schema
  fullnameOverride: "opentelemetry-collector"

  # @schema
  # type: object
  # additionalProperties: true
  # description: Container image configuration for OpenTelemetry Collector
  # @schema
  image:
    # @schema
    # type: string
    # description: OpenTelemetry Collector image repository (contrib version includes extra receivers/exporters)
    # default: otel/opentelemetry-collector-contrib
    # @schema
    repository: otel/opentelemetry-collector-contrib

  # @schema
  # description: Deployment mode for the collector
  # enum: [deployment, daemonset, statefulset, sidecar]
  # default: deployment
  # @schema
  mode: deployment

  # @schema
  # type: object
  # additionalProperties: true
  # description: Resource limits and requests for the collector
  # @schema
  resources:
    # @schema
    # type: object
    # additionalProperties: true
    # description: Maximum resources the collector can consume
    # @schema
    limits:
      # @schema
      # type: string
      # description: CPU limit for the collector
      # default: 100m
      # @schema
      cpu: 100m
      # @schema
      # type: string
      # description: Memory limit for the collector
      # default: 200Mi
      # @schema
      memory: 200Mi
    # @schema
    # type: object
    # additionalProperties: true
    # description: Minimum resources guaranteed for the collector
    # @schema
    requests:
      # @schema
      # type: string
      # description: CPU request for the collector
      # default: 50m
      # @schema
      cpu: 50m
      # @schema
      # type: string
      # description: Memory request for the collector
      # default: 100Mi
      # @schema
      memory: 100Mi


# @schema
# type: object
# additionalProperties: true
# description: Cluster Agent configuration for WebSocket connection to control plane cluster gateway
# @schema
clusterAgent:
  # @schema
  # type: boolean
  # description: Enable the cluster agent deployment
  # default: true
  # @schema
  enabled: true

  # @schema
  # type: string
  # description: Name of the cluster agent deployment
  # default: cluster-agent-dataplane
  # @schema
  name: cluster-agent-dataplane

  # @schema
  # type: integer
  # description: Number of cluster agent replicas (typically 1 per data plane)
  # default: 1
  # minimum: 0
  # @schema
  replicas: 1

  # @schema
  # type: object
  # description: Container image configuration for cluster agent
  # @schema
  image:
    # @schema
    # type: string
    # description: Cluster agent image repository
    # default: ghcr.io/openchoreo/cluster-agent
    # @schema
    repository: ghcr.io/openchoreo/cluster-agent

    # @schema
    # type: string
    # description: Image tag. Empty uses Chart.AppVersion.
    # default: ""
    # @schema
    tag: ""

    # @schema
    # description: Image pull policy
    # enum: [Always, IfNotPresent, Never]
    # default: IfNotPresent
    # @schema
    pullPolicy: IfNotPresent

  # @schema
  # type: string
  # description: WebSocket URL of the cluster gateway in control plane
  # default: wss://cluster-gateway.openchoreo-control-plane.svc.cluster.local:8443/ws
  # @schema
  serverUrl: wss://cluster-gateway.openchoreo-control-plane.svc.cluster.local:8443/ws

  # @schema
  # type: string
  # description: Logical plane identifier shared across multiple CRs connecting to the same physical plane. Defaults to Helm release name if not specified.
  # default: default-dataplane
  # @schema
  planeID: default-dataplane

  # @schema
  # description: Type of plane this agent manages
  # enum: [dataplane, buildplane, observabilityplane]
  # default: dataplane
  # @schema
  planeType: dataplane

  # @schema
  # type: string
  # description: Interval between heartbeat messages to control plane
  # default: 30s
  # @schema
  heartbeatInterval: 30s

  # @schema
  # type: string
  # description: Delay before attempting reconnection after disconnect
  # default: 5s
  # @schema
  reconnectDelay: 5s

  # @schema
  # description: Log level for cluster agent
  # enum: [trace, debug, info, warn, error]
  # default: info
  # @schema
  logLevel: info

  # @schema
  # type: object
  # description: Resource limits and requests for cluster agent
  # @schema
  resources:
    # @schema
    # type: object
    # description: Minimum resources guaranteed for the agent
    # @schema
    requests:
      # @schema
      # type: string
      # description: CPU request for the agent
      # default: "50m"
      # @schema
      cpu: "50m"
      # @schema
      # type: string
      # description: Memory request for the agent
      # default: "128Mi"
      # @schema
      memory: "128Mi"
    # @schema
    # type: object
    # description: Maximum resources the agent can consume
    # @schema
    limits:
      # @schema
      # type: string
      # description: CPU limit for the agent
      # default: "100m"
      # @schema
      cpu: "100m"
      # @schema
      # type: string
      # description: Memory limit for the agent
      # default: "256Mi"
      # @schema
      memory: "256Mi"

  # @schema
  # type: object
  # description: Pod Disruption Budget configuration for cluster agent
  # @schema
  podDisruptionBudget:
    # @schema
    # type: boolean
    # description: Enable PodDisruptionBudget for cluster agent
    # default: false
    # @schema
    enabled: false
    # @schema
    # type: integer
    # description: Minimum number of pods that must be available
    # minimum: 0
    # default: 1
    # @schema
    minAvailable: 1
    # @schema
    # type: [integer, "null"]
    # description: Maximum number of pods that can be unavailable
    # minimum: 0
    # @schema
    maxUnavailable: null

  # @schema
  # type: object
  # description: Service account configuration for cluster agent
  # @schema
  serviceAccount:
    # @schema
    # type: boolean
    # description: Create a service account for the cluster agent
    # default: true
    # @schema
    create: true

    # @schema
    # type: string
    # description: Service account name
    # default: cluster-agent-dataplane
    # @schema
    name: cluster-agent-dataplane

    # @schema
    # type: object
    # description: Annotations to add to the service account
    # additionalProperties:
    #   type: string
    # default: {}
    # @schema
    annotations: {}

  # @schema
  # type: object
  # description: RBAC configuration for cluster agent
  # @schema
  rbac:
    # @schema
    # type: boolean
    # description: Create RBAC resources (ClusterRole, ClusterRoleBinding)
    # default: true
    # @schema
    create: true

  # @schema
  # type: object
  # description: Priority class configuration for cluster agent pods
  # @schema
  priorityClass:
    # @schema
    # type: boolean
    # description: Create a PriorityClass for cluster agent
    # default: false
    # @schema
    create: false

    # @schema
    # type: string
    # description: PriorityClass name
    # default: cluster-agent-dataplane
    # @schema
    name: cluster-agent-dataplane

    # @schema
    # type: integer
    # description: Priority value (higher = more important)
    # default: 900000
    # @schema
    value: 900000

  # @schema
  # type: object
  # description: TLS configuration for secure agent-gateway communication
  # @schema
  tls:
    # @schema
    # type: boolean
    # description: Enable TLS for agent-gateway communication
    # default: true
    # @schema
    enabled: true

    # @schema
    # type: boolean
    # description: Generate client certificates locally using cert-manager (for multi-cluster setups where data plane is in different cluster)
    # default: false
    # @schema
    generateCerts: false

    # @schema
    # type: string
    # description: Secret name for client certificate and key
    # default: cluster-agent-tls
    # @schema
    secretName: cluster-agent-tls

    # @schema
    # type: string
    # description: Secret name for client certificate (typically same as secretName)
    # default: cluster-agent-tls
    # @schema
    clientSecretName: cluster-agent-tls

    # @schema
    # type: string
    # description: ConfigMap name containing server CA certificate for verifying gateway
    # default: cluster-gateway-ca
    # @schema
    serverCAConfigMap: cluster-gateway-ca

    # @schema
    # type: string
    # description: CA secret name for signing agent client certificates. If empty, self-signed certs will be generated (required for multi-cluster setup).
    # default: cluster-gateway-ca
    # @schema
    caSecretName: cluster-gateway-ca

    # @schema
    # type: string
    # description: Certificate validity duration
    # default: 2160h
    # @schema
    duration: 2160h

    # @schema
    # type: string
    # description: Time before expiry to renew certificate
    # default: 360h
    # @schema
    renewBefore: 360h

  # @schema
  # type: object
  # description: Pod-level security context
  # @schema
  podSecurityContext:
    # @schema
    # type: boolean
    # description: Run container as non-root user
    # default: true
    # @schema
    runAsNonRoot: true

    # @schema
    # type: integer
    # description: User ID to run container as
    # default: 1000
    # @schema
    runAsUser: 1000

    # @schema
    # type: integer
    # description: Group ID for volume mounts
    # default: 1000
    # @schema
    fsGroup: 1000

  # @schema
  # type: object
  # description: Container-level security context
  # @schema
  securityContext:
    # @schema
    # type: boolean
    # description: Prevent privilege escalation
    # default: false
    # @schema
    allowPrivilegeEscalation: false

    # @schema
    # type: object
    # description: Linux capabilities configuration
    # @schema
    capabilities:
      # @schema
      # type: array
      # description: Capabilities to drop from container
      # items:
      #   type: string
      # default: [ALL]
      # @schema
      drop:
        - ALL

    # @schema
    # type: boolean
    # description: Mount root filesystem as read-only
    # default: true
    # @schema
    readOnlyRootFilesystem: true

  # @schema
  # type: object
  # description: Annotations to add to cluster agent pods
  # additionalProperties:
  #   type: string
  # default: {}
  # @schema
  podAnnotations: {}

  # @schema
  # type: object
  # description: Node selector for pod scheduling
  # additionalProperties:
  #   type: string
  # default: {}
  # @schema
  nodeSelector: {}

  # @schema
  # type: array
  # description: Tolerations for pod scheduling
  # items:
  #   type: object
  #   properties:
  #     key:
  #       type: string
  #     operator:
  #       enum: [Exists, Equal]
  #     value:
  #       type: string
  #     effect:
  #       enum: [NoSchedule, PreferNoSchedule, NoExecute]
  # default: []
  # @schema
  tolerations: []

  # @schema
  # type: object
  # description: Affinity rules for pod scheduling
  # default: {}
  # @schema
  affinity: {}

# @schema
# type: object
# description: k3d-specific configuration for local development clusters
# @schema
k3d:
  # @schema
  # type: object
  # description: CoreDNS rewrite for multi-cluster k3d setups
  # @schema
  dnsRewrite:
    # @schema
    # type: boolean
    # description: Deploy a CoreDNS custom ConfigMap that rewrites *.openchoreo.localhost to host.k3d.internal
    # default: false
    # @schema
    enabled: false

# @schema
# type: object
# additionalProperties: true
# description: WSO2 API Platform configuration for advanced API management capabilities
# @schema
api-platform:
  # @schema
  # type: boolean
  # description: Enable WSO2 API Platform gateway operator
  # default: false
  # @schema
  enabled: false

  # @schema
  # type: object
  # additionalProperties: true
  # description: Gateway configuration for API Platform
  # @schema
  gateway:
    # @schema
    # type: object
    # additionalProperties: true
    # description: Helm chart reference for gateway sub-chart
    # @schema
    helm:
      # @schema
      # type: string
      # description: OCI chart reference for the API Platform gateway
      # default: "oci://ghcr.io/wso2/api-platform/helm-charts/gateway"
      # @schema
      chartName: "oci://ghcr.io/wso2/api-platform/helm-charts/gateway"

      # @schema
      # type: string
      # description: Version of the API Platform gateway chart
      # default: "0.3.0"
      # @schema
      chartVersion: "0.3.0"

    # @schema
    # type: string
    # description: Name of the ConfigMap referenced by the Gateway configRef
    # default: "api-platform-default-gateway-values"
    # @schema
    configRefName: "api-platform-default-gateway-values"
