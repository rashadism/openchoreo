# Default roles and mappings that can be seeded at installation time
# Examples
# roles:
#   - name: custom-role
#     actions:
#       - "organization:view"
#       - "project:view"
#
# mappings:
#   - role_name: custom-role        
#     entitlement:
#       claim: groups                    # JWT claim from your IDP 
#       value: developers                # Value to match from the claim
#     effect: allow                      # "allow" (default) or "deny"
#     hierarchy:                         # Optional: scope this mapping to specific resources
#       organization: my-org             # Organization name
#       project: my-project              # Project name (requires organization)
#       component: my-component          # Component name (requires organization and project)

# Default roles
roles:
  # Super admin role with full permissions to all resources
  - name: super-admin
    actions:
      - "*"

  # Backstage catalog provider role for reading catalog data from the control plane
  - name: backstage-catalog-reader
    actions:
      - "component:view"
      - "componenttype:view"
      - "organization:view"
      - "project:view"
      - "dataplane:view"
      - "environment:view"

  # Root Cause Analysis (RCA) agent role for troubleshooting and debugging
  - name: rca-agent
    actions:
      - "component:view"
      - "project:view"
      - "organization:view"
      - "componentrelease:view"
      - "releasebinding:view"
      - "componentworkflowrun:view"
      - "environment:view"
      - "logs:view"
      - "metrics:view"
      - "alerts:view"
      - "traces:view"

# Default entitlement-to-role mappings
mappings:
  - role_name: super-admin
    entitlement:
      claim: groups
      value: platformEngineer
    effect: allow
  - role_name: backstage-catalog-reader
    entitlement:
      claim: sub
      value: openchoreo-backstage-client
    effect: allow
  - role_name: rca-agent
    entitlement:
      claim: sub
      value: openchoreo-rca-agent
    effect: allow
