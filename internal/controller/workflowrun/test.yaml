apiVersion: argoproj.io/v1alpha1
kind: Workflow
metadata:
  name: checkout-service-build-02
  namespace: openchoreo-ci-default
spec:
  arguments:
    parameters:
    - name: component-name
      value: checkout-service
    - name: project-name
      value: backend-services
    - name: git-repo
      value: https://github.com/openchoreo/sample-workloads
    - name: branch
      value: main
    - name: commit
      value: ""
    - name: app-path
      value: /service-go-greeter
    - name: credentialsRef
      value: checkout-repo-credentials-dev
    - name: version
      value: 1
    - name: test-mode
      value: integration
    - name: command
      value: [npm, run, build]
    - name: args
      value: ["--production", "--verbose"]
    - name: cpu-cores
      value: 2
    - name: memory-gb
      value: 4
    - name: timeout
      value: 45m
    - name: cache-enabled
      value: true
    - name: cache-paths
      value: ["/root/.npm", "/root/.cache"]
    - name: max-retries
      value: 5
    - name: max-duration-minutes
      value: 90
    - name: builder-image
      value: gcr.io/buildpacks/builder@sha256:5977b4bd47d3e9ff729eefe9eb99d321d4bba7aa3b14986323133f40b622aef1
    - name: registry-url
      value: gcr.io/openchoreo-dev/images
    - name: security-scan-enabled
      value: unknown
    - name: build-timeout
      value: 0m
    - name: image-name
      value: checkout-service-image
    - name: image-tag
      value: v1
  serviceAccountName: workflow-sa
  workflowTemplateRef:
    clusterScope: true
    name: google-cloud-buildpacks
